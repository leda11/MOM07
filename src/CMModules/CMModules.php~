    <?php
    /**
    * A model for managing Lydia modules.
    *
    * @package HandyCore
    */
    class CMModules extends CObject {

      /**
       * Constructor
       */
      public function __construct() { parent::__construct(); }

      
      /**
       * A list of all available controllers/methods
       *
       * @returns array list of controllers (key) and an array of methods
       */
      public function AvailableControllers() { 
        $controllers = array();
        foreach($this->config['controllers'] as $key => $val) {
          if($val['enabled']) {
            $rc = new ReflectionClass($val['class']);
            $controllers[$key] = array();
            $methods = $rc->getMethods(ReflectionMethod::IS_PUBLIC);
            foreach($methods as $method) {
              if($method->name != '__construct' && $method->name != '__destruct' && $method->name != 'Index') {
                $methodName = mb_strtolower($method->name);
                $controllers[$key][] = $methodName;
              }
            }
            sort($controllers[$key], SORT_LOCALE_STRING);
          }
        }
        ksort($controllers, SORT_LOCALE_STRING);
        return $controllers;
      }
    }
    
